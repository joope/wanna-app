<div class="topmargin"></div>
<nav class="navbar navbar-default sporttimenu navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="glyphicon glyphicon-menu-hamburger"></span>
            </button>
            <a class="navbar-brand" href="#/" ng-bind="title"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Ilmoitukset <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <button ng-repeat="ntf in notifications | orderBy:'-createdAt' | limitTo:20" type="button" class="list-group-item list-group-item-{{ntf.type}}">
                            {{ntf.message}} <span class="pull-right">({{ntf.createdAt | date:'d.M. H:mm'}})</span>
                        </button>
                    </ul>
                </li>
                <li><a href="#/calendar">Tapahtumat</a></li>
                <li><a href="#/events">Suositukset</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>
<div class='events form'>
<!--    <h1 class="text-center paaotsikko">Kalenteri</h1>-->

    <!--list of events user has joined-->
    <div id="searchbar" class="list group">
        <div class="event_wrapper"  ng-repeat="event in events | orderBy:'date' | limitTo:30">

            <!--date header bar-->
            <div ng-show="dateChanged(event.date, $index)" class="otsikko">
                {{dateToRelative(event.date)}} {{event.date| date:'d.M'}}
            </div>

            <!--event name and basic info-->
            <a href="#/calendar" type="button" class="list-group-item" 
               ng-click="eventClicked(event)">
                <h4 class="list-group-item-heading">{{event.name}}                            
                    <span class="badge pull-right"
                          ng-class="{'badge-info': event.currentSize > 1 && !event.ready, 'badge-success': event.ready}">
                        {{event.currentSize}}/{{event.minSize}} 
                    </span>
                </h4>
                <p class="list-group-item-text">{{event.place}}
                    <span class="pull-right"><strong>{{event.date| date:'H:mm'}}</strong></span>
                </p>
            </a>
            <!--info wrapper for event-->
            <div ng-show="event.clicked" class="list-group-item animate-show info-wrapper">
                <p class="list-group-item-text">
                    <strong>Lisätietoja:</strong> {{event.info}}
                </p>
                <p class="list-group-item-text">
                    <strong>Osallistujat:</strong> {{event.userList}}
                </p>
                <div class="event_info">
                    <button class="btn btn-success btn_join" type="button" ng-if="!event.joined" ng-click="join(event)" >liity
                    </button>
                    <button class="btn btn-warning btn_join" ng-disabled="event.ready" type="button" ng-if="event.joined" ng-click="join(event)" >lähde
                    </button>
                </div>
            </div>
        </div>
        <button ng-show="events.length === 0" type="button" class="list-group-item list-group-item-danger">
            Ei löydetty tapahtumia, liity tai lisää tapahtumia etusivulta
        </button>
    </div>
</div>
